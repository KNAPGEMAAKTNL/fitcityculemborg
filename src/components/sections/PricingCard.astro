---
interface Props {
  name: string;
  price: string;
  term: string;
  features: string[];
  id?: string;
  isHighlighted?: boolean;
  theme?: 'default' | 'ladies' | 'kickboxing';
  subtitle?: string;
  icons?: ('fitness' | 'ladies' | 'kickboxing')[];
}

const {
  name,
  price,
  features,
  id,
  isHighlighted = false,
  theme = 'default',
  subtitle = '€17,00 inschrijfkosten',
  icons = []
} = Astro.props;

type IconConfig = {
  path?: string;
  viewBox?: string;
  img?: string;
  color: string;
};

// Better Icons (Using FontAwesome-like paths or simple custom ones)
const iconsMap: Record<string, IconConfig> = {
  fitness: {
    // Multi-plate dumbbell matching user image (Handle + Inner Plate + Outer Plate)
    path: "M8.5 11h7v2h-7z M6 6.5c0-.83.67-1.5 1.5-1.5S9 5.67 9 6.5v11c0 .83-.67 1.5-1.5 1.5S6 18.33 6 17.5v-11z M15 6.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v11c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5v-11z M3 8h2v8H3z M19 8h2v8h-2z M1 10h1v4H1z M22 10h1v4h-1z",
    viewBox: "0 0 24 24",
    color: "text-primary"
  },
  ladies: {
    path: "M8.5 11h7v2h-7z M6 6.5c0-.83.67-1.5 1.5-1.5S9 5.67 9 6.5v11c0 .83-.67 1.5-1.5 1.5S6 18.33 6 17.5v-11z M15 6.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v11c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5v-11z M3 8h2v8H3z M19 8h2v8h-2z M1 10h1v4H1z M22 10h1v4h-1z", // Same Dumbbell
    viewBox: "0 0 24 24",
    color: "text-[#FF2E93]"
  },
  kickboxing: {
    img: "/icons/kickboxing.webp",
    color: "" // Image has own color
  }
};
---

<div
  class:list={[
    'relative card-industrial p-6 md:p-8 flex flex-col h-full',
    isHighlighted && theme === 'ladies' ? 'border-2 border-[#FF2E93]' :
    isHighlighted && theme === 'kickboxing' ? 'border-2 border-[#FF5722]' :
    isHighlighted ? 'border-2 border-primary' : ''
  ]}
>
  {isHighlighted && (
    <div class="absolute top-0 right-0 px-4 py-1 bg-primary text-black text-xs font-bold uppercase z-20">
      Beste deal
    </div>
  )}

  <div class="flex justify-between items-start mb-2">
    <h3 class="font-display text-xl md:text-2xl max-w-[70%]">
      {name}
    </h3>
    
    <!-- Category Icons -->
    <div class="flex items-center gap-2">
      {icons.map(icon => {
        const config = iconsMap[icon];
        if (!config) return null;

        return (
          <div class={`flex items-center justify-center ${config.color || 'text-primary'}`} title={icon}>
            {config.img ? (
              <img src={config.img} alt={icon} class="w-8 h-8 object-contain" width={32} height={32} />
            ) : (
              <svg class="w-8 h-8" fill="currentColor" viewBox={config.viewBox || "0 0 24 24"}>
                <path d={config.path || ""} />
              </svg>
            )}
          </div>
        );
      })}
    </div>
  </div>

  <div class="mb-6">
    <div class="flex items-baseline gap-2">
      <span class="text-5xl md:text-6xl font-display text-primary">
        €{price}
      </span>
      <span class="text-text-muted text-lg">/maand</span>
    </div>
    <p class="text-text-muted text-sm mt-1">{subtitle}</p>
  </div>

  <ul class="space-y-3 mb-8 flex-grow">
    {features.map((feature) => (
      <li class="flex items-start gap-3">
        <svg class="w-5 h-5 text-primary flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
        </svg>
        <span class="text-sm text-text-main">{feature}</span>
      </li>
    ))}
  </ul>

  <slot>
    <a href={`/signup${id ? `?plan=${id}` : ''}`} class="btn-primary w-full text-center">
      KIES {name.toUpperCase()}
    </a>
  </slot>
</div>
